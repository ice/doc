<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="stylesheet" type="text/css" href="../../asset/static/css/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="../../asset/static/css/tomorrow.min.css" id="tomorrow" />
        <link rel="stylesheet" type="text/css" href="../../asset/static/css/tomorrow-night.min.css" id="tomorrow-night" disabled />
        <link rel="stylesheet" type="text/css" href="../../asset/static/css/style.css" />
    </head>
    <body>
        <header class="navbar navbar-default navbar-fixed-top">
            <div id="top-bar" class="container-fluid">
                <div id="top-left" class="navbar-header">
                    <a href="../../index.html" class="navbar-brand">
                                                    ice Documentation <span class="version">v1.0.23</span>
                                            </a>
                </div>
                <div id="top-right" class="collapse navbar-collapse">

                </div>
            </div>
        </header>
        <div id="body" class="container-fluid">
            <div class="row">
                <div id="body-left" class="col-lg-3 col-sm-4">
                    <div class="header-search">
                        <input class="search-box form-control" placeholder="Search for a class or namespace " type="text" />
                        <div id="menu-wrapper">
                        </div>
                    </div>
                </div>
                <div id="body-right" class="col-lg-9 col-sm-8">
                    <div class="content">
                        
<div>
    
    <ul class="breadcrumb">
        
        <li><a href="../../index.html">Home</a></li>
        
                <li><a href="../../classes.html">Classes</a></li>
                <li><a href="../../class/Ice/Dump.html">Ice\Dump</a></li>
                <li><a >Source</a></li>
                
    </ul>
    
</div>
<div class="class-header source clearfix">
    
    <div class="access-buttons pull-right">
        <a class="zep-button btn btn-default" href="../../class/Ice/Dump.html">Class</a>

                <a class="zep-button btn btn-default" href="https://github.com/ice/framework/tree/dev/ice/dump.zep">Github</a>
            </div>
    
    <div class="class-full-name">
        
        <span class="class-type">Class</span>
        
                <span class="namespace-piece">
            <a href="../../namespace/Ice.html">Ice</a>
        </span>
                <h1 class="class-name">Dump</h1>
    </div>
    
</div>


<pre class="zephir-source-file"><code>
namespace Ice;

/**
 * Dumps information about a variable(s)
 *
 * @package     Ice/Dump
 * @category    Helper
 * @author      Ice Team
 * @copyright   (c) 2014-2015 Ice Team
 * @license     http://iceframework.org/license
 *
 * &lt;pre&gt;&lt;code&gt;
 *  $foo = 123;
 *  echo (new \Ice\Dump())-&gt;variable($foo, &quot;foo&quot;);
 * &lt;/code&gt;&lt;/pre&gt;
 * 
 * &lt;pre&gt;&lt;code&gt;
 *  $foo = &quot;string&quot;;
 *  $bar = [&quot;key&quot; =&gt; &quot;value&quot;];
 *  $baz = new stdClass();
 *  echo (new \Ice\Dump())-&gt;vars($foo, $bar, $baz);
 * &lt;/code&gt;&lt;/pre&gt;
 *
 * Sleet usage:
 * &lt;pre&gt;&lt;code&gt;
 *  {{ dump(&apos;str&apos;, 1, 2.5, true, null, [&apos;key&apos;: &apos;value&apos;]) }}
 * &lt;/code&gt;&lt;/pre&gt;
 */
class Dump
{

    protected detailed = false { get, set };
    protected methods = [];
    protected styles = [];

    /**
     * Dump constructor
     *
     * @param boolean detailed debug object&apos;s private and protected properties
     * @param array styles
     */
    public function __construct(boolean detailed = false, array styles = [])
    {
        if typeof styles != &quot;array&quot; {
            throw new Exception(&quot;The styles must be an array&quot;);
        }
        this-&gt;setStyles(styles);
        let this-&gt;detailed = detailed;
    }


    /**
     * Alias of vars() method
     *
     * &lt;pre&gt;&lt;code&gt;
     *  echo (new \Ice\Dump())-&gt;all($foo, $bar, $baz);
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param mixed variable
     * @param ...
     * @return string
     */
    public function all() -&gt; string
    {
        return call_user_func_array([this, &quot;vars&quot;], func_get_args());
    }

    /**
     * Get style for type
     *
     * @param string type
     * @return string
     */
    protected function getStyle(string! type) -&gt; string
    {
        var style;

        if fetch style, this-&gt;styles[type] {
            return style;
        } else {
            return &quot;color:gray&quot;;
        }
    }

    /**
     * Set styles for vars type
     * Styles: pre, arr, bool, float, int, null, num, obj, other, res, str
     *
     * @param array styles
     * @return array
     */
    public function setStyles(array styles = []) -&gt; array
    {
        var defaultStyles;

        if typeof styles != &quot;array&quot; {
            throw new Exception(&quot;The styles must be an array&quot;);
        }

        let defaultStyles = [
            &quot;pre&quot;: &quot;background-color:#f9f9f9; font-size:11px; padding:10px; border:1px solid #ccc; text-align:left; color:#333&quot;,
            &quot;arr&quot;: &quot;color:red&quot;,
            &quot;bool&quot;: &quot;color:green&quot;,
            &quot;float&quot;: &quot;color:fuchsia&quot;,
            &quot;int&quot;: &quot;color:blue&quot;,
            &quot;null&quot;: &quot;color:black&quot;,
            &quot;num&quot;: &quot;color:navy&quot;,
            &quot;obj&quot;: &quot;color:purple&quot;,
            &quot;other&quot;: &quot;color:maroon&quot;,
            &quot;res&quot;: &quot;color:lime&quot;,
            &quot;str&quot;: &quot;color:teal&quot;
        ];

        let this-&gt;styles = array_merge(defaultStyles, styles);
        return this-&gt;styles;
    }

    /**
     * Alias of variable() method
     *
     * &lt;pre&gt;&lt;code&gt;
     *  echo (new \Ice\Dump())-&gt;one($foo, &quot;foo&quot;);
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param mixed variable
     * @param string name
     * @return string
     */
    public function one(variable, string name = null) -&gt; string
    {
        return this-&gt;variable(variable, name);
    }   

    /**
     * Prepare an HTML string of information about a single variable.
     *
     * @param mixed variable
     * @param string name
     * @param integer tab
     * @return  string
     */
    protected function output(variable, name = null, tab = 1) -&gt; string
    {
        var key, value, output, space, type, attr;

        let space = &quot;  &quot;, 
            output = &quot;&quot;;

        if name {
            let output = name . &quot; &quot;;
        }

        if typeof variable == &quot;array&quot; {
            let output .= strtr(&quot;&lt;b style =&apos;:style&apos;&gt;array&lt;/b&gt; (&lt;span style =&apos;:style&apos;&gt;:count&lt;/span&gt;) (\n&quot;, [&quot;:style&quot;: this-&gt;getStyle(&quot;arr&quot;), &quot;:count&quot;: count(variable)]);

            for key, value in variable {
                let output .= str_repeat(space, tab) . strtr(&quot;[&lt;span style=&apos;:style&apos;&gt;:key&lt;/span&gt;] =&gt; &quot;, [&quot;:style&quot;: this-&gt;getStyle(&quot;arr&quot;), &quot;:key&quot;: key]);

                if tab == 1 &amp;&amp; name != &quot;&quot; &amp;&amp; !is_int(key) &amp;&amp; name == key {
                    continue;
                } else {
                    let output .= this-&gt;output(value, &quot;&quot;, tab + 1) . &quot;\n&quot;;
                }
            }
            return output . str_repeat(space, tab - 1) . &quot;)&quot;;
        }

        if typeof variable == &quot;object&quot; {
            var className;

            let className = get_class(variable),
                output .= strtr(&quot;&lt;b style=&apos;:style&apos;&gt;object&lt;/b&gt; :class&quot;, [&quot;:style&quot;: this-&gt;getStyle(&quot;obj&quot;), &quot;:class&quot;: className]);

            if get_parent_class(variable) {
                let output .= strtr(&quot; &lt;b style=&apos;:style&apos;&gt;extends&lt;/b&gt; :parent&quot;, [&quot;:style&quot;: this-&gt;getStyle(&quot;obj&quot;), &quot;:parent&quot;: get_parent_class(variable)]);
            }
            let output .= &quot; (\n&quot;;

            if variable instanceof Di {
                // Skip debuging di
                let output .= str_repeat(space, tab) . &quot;[skipped]\n&quot;;
            } elseif !this-&gt;detailed {
                // Debug only public properties
                for key, value in get_object_vars(variable) {
                    let output .= str_repeat(space, tab) . strtr(&quot;-&gt;&lt;span style=&apos;:style&apos;&gt;:key&lt;/span&gt; (&lt;span style=&apos;:style&apos;&gt;:type&lt;/span&gt;) = &quot;, [&quot;:style&quot;: this-&gt;getStyle(&quot;obj&quot;), &quot;:key&quot;: key, &quot;:type&quot;: &quot;public&quot;]);
                    let output .= this-&gt;output(value, &quot;&quot;, tab + 1) . &quot;\n&quot;;
                }
            } else {
                // Debug all properties
                do {
                    let attr = each(variable);

                    if !attr {
                        continue;
                    }
                    let key = attr[&quot;key&quot;],
                        value = attr[&quot;value&quot;];

                    if !key {
                        continue;
                    }

                    // Explode key by the &quot;\x00&quot; char
                    let key = explode(chr(0), key),
                        type = &quot;public&quot;;

                    if isset key[1] {
                        let type = &quot;private&quot;;

                        if key[1] == &quot;*&quot; {
                            let type = &quot;protected&quot;;
                        }
                    }
                    let output .= str_repeat(space, tab) . strtr(&quot;-&gt;&lt;span style=&apos;:style&apos;&gt;:key&lt;/span&gt; (&lt;span style=&apos;:style&apos;&gt;:type&lt;/span&gt;) = &quot;, [&quot;:style&quot;: this-&gt;getStyle(&quot;obj&quot;), &quot;:key&quot;: end(key), &quot;:type&quot;: type]),
                        output .= this-&gt;output(value, &quot;&quot;, tab + 1) . &quot;\n&quot;;
                } while attr;
            }

            let attr = get_class_methods(variable),
                output .= str_repeat(space, tab) . strtr(&quot;:class &lt;b style=&apos;:style&apos;&gt;methods&lt;/b&gt;: (&lt;span style=&apos;:style&apos;&gt;:count&lt;/span&gt;) (\n&quot;, [&quot;:style&quot;: this-&gt;getStyle(&quot;obj&quot;), &quot;:class&quot;: className, &quot;:count&quot;: count(attr)]);

            if in_array(className, this-&gt;methods) {
                let output .= str_repeat(space, tab) . &quot;[already listed]\n&quot;;
            } else {
                for value in attr {
                    if !in_array(className, this-&gt;methods) {
                        let this-&gt;methods[] = className;
                    }
                    if value == &quot;__construct&quot; {
                        let output .= str_repeat(space, tab + 1) . strtr(&quot;-&gt;&lt;span style=&apos;:style&apos;&gt;:method&lt;/span&gt;(); [&lt;b style=&apos;:style&apos;&gt;constructor&lt;/b&gt;]\n&quot;, [&quot;:style&quot;: this-&gt;getStyle(&quot;obj&quot;), &quot;:method&quot;: value]);
                    } else {
                        let output .= str_repeat(space, tab + 1) . strtr(&quot;-&gt;&lt;span style=&apos;:style&apos;&gt;:method&lt;/span&gt;();\n&quot;, [&quot;:style&quot;: this-&gt;getStyle(&quot;obj&quot;), &quot;:method&quot;: value]);
                    }
                }
                let output .= str_repeat(space, tab) . &quot;)\n&quot;;
            }
            return output . str_repeat(space, tab - 1) . &quot;)&quot;;
        }

        if is_int(variable) {
            return output . strtr(&quot;&lt;b style=&apos;:style&apos;&gt;integer&lt;/b&gt; (&lt;span style=&apos;:style&apos;&gt;:var&lt;/span&gt;)&quot;, [&quot;:style&quot;: this-&gt;getStyle(&quot;int&quot;), &quot;:var&quot;: variable]);
        }

        if is_float(variable) {
            return output . strtr(&quot;&lt;b style=&apos;:style&apos;&gt;float&lt;/b&gt; (&lt;span style=&apos;:style&apos;&gt;:var&lt;/span&gt;)&quot;, [&quot;:style&quot;: this-&gt;getStyle(&quot;float&quot;), &quot;:var&quot;: variable]);
        }

        if is_numeric(variable) {
            return output . strtr(&quot;&lt;b style=&apos;:style&apos;&gt;numeric string&lt;/b&gt; (&lt;span style=&apos;:style&apos;&gt;:length&lt;/span&gt;) \&quot;&lt;span style=&apos;:style&apos;&gt;:var&lt;/span&gt;\&quot;&quot;, [&quot;:style&quot;: this-&gt;getStyle(&quot;num&quot;), &quot;:length&quot;: strlen(variable), &quot;:var&quot;: variable]);
        }

        if is_string(variable) {
            return output . strtr(&quot;&lt;b style=&apos;:style&apos;&gt;string&lt;/b&gt; (&lt;span style=&apos;:style&apos;&gt;:length&lt;/span&gt;) \&quot;&lt;span style=&apos;:style&apos;&gt;:var&lt;/span&gt;\&quot;&quot;, [&quot;:style&quot;: this-&gt;getStyle(&quot;str&quot;), &quot;:length&quot;: strlen(variable), &quot;:var&quot;: nl2br(htmlentities(variable, ENT_IGNORE, &quot;utf-8&quot;))]);
        }

        if is_bool(variable) {
            return output . strtr(&quot;&lt;b style=&apos;:style&apos;&gt;boolean&lt;/b&gt; (&lt;span style=&apos;:style&apos;&gt;:var&lt;/span&gt;)&quot;, [&quot;:style&quot;: this-&gt;getStyle(&quot;bool&quot;), &quot;:var&quot;: (variable ? &quot;true&quot; : &quot;false&quot;)]);
        }

        if is_null(variable) {
            return output . strtr(&quot;&lt;b style=&apos;:style&apos;&gt;null&lt;/b&gt;&quot;, [&quot;:style&quot;: this-&gt;getStyle(&quot;null&quot;)]);
        }
        return output . strtr(&quot;(&lt;span style=&apos;:style&apos;&gt;:var&lt;/span&gt;)&quot;, [&quot;:style&quot;: this-&gt;getStyle(&quot;other&quot;), &quot;:var&quot;: variable]);
    }

     /**
     * Returns an HTML string of information about a single variable.
     *
     * &lt;pre&gt;&lt;code&gt;
     *  $foo = 123;
     *  echo (new \Ice\Dump())-&gt;variable($foo, &quot;foo&quot;);
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param mixed variable
     * @param string name
     * @return string
     */
    public function variable(variable, string name = null) -&gt; string
    {
        return strtr(&quot;&lt;pre style=&apos;:style&apos;&gt;:output&lt;/pre&gt;&quot;, [&quot;:style&quot;: this-&gt;getStyle(&quot;pre&quot;), &quot;:output&quot;: this-&gt;output(variable, name)]);
    }

    /**
     * Returns an HTML string of debugging information about any number of
     * variables, each wrapped in a &quot;pre&quot; tag.
     *
     * &lt;pre&gt;&lt;code&gt;
     *  $foo = &quot;string&quot;;
     *  $bar = [&quot;key&quot; =&gt; &quot;value&quot;];
     *  $baz = new stdClass();
     *  echo (new \Ice\Dump())-&gt;vars($foo, $bar, $baz);
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param mixed variable
     * @param ...
     * @return string
     */
    public function vars() -&gt; string
    {
        var key, value, output;

        let output = &quot;&quot;;

        for key, value in func_get_args() {
            let output .= this-&gt;one(value, &quot;var &quot; . key);
        }

        return output;
    }
}
</code></pre>                    </div>
                </div>
            </div>
        </div>

        <script src="../../asset/static/js/jquery.min.js"></script>
        <script src="../../asset/static/js/bootstrap.min.js"></script>
        <script src="../../asset/static/js/highlight.pack.js"></script>
        <script src="../../asset/static/js/jquery.slimscroll.min.js"></script>
        <script src="../../asset/api_definition.js"></script>

        <script>var ZepCurrentPath = '../../'</script>
        <script src="../../asset/static/js/script.js"></script>
        <script type="text/javascript">
            $(window).on("load resize", function() {
                $('#menu-wrapper').slimscroll({ height: $(window).height() - 100, size: '3px' });
            });
        </script>
        <script type="text/javascript">
            $(document).ready(function() { $('pre code').each(function(i, block) { hljs.highlightBlock(block); }); });
            if ($('.zephir-source-file').length) {
                $('link[id]').each(function(i, link) {
                    link.disabled = (link.id != 'tomorrow-night');
                });
            }
        </script>
            </body>
</html>