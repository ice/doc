<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="stylesheet" type="text/css" href="../../asset/static/css/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="../../asset/static/css/tomorrow.min.css" id="tomorrow" />
        <link rel="stylesheet" type="text/css" href="../../asset/static/css/tomorrow-night.min.css" id="tomorrow-night" disabled />
        <link rel="stylesheet" type="text/css" href="../../asset/static/css/style.css" />
    </head>
    <body>
        <header class="navbar navbar-default navbar-fixed-top">
            <div id="top-bar" class="container-fluid">
                <div id="top-left" class="navbar-header">
                    <a href="../../index.html" class="navbar-brand">
                                                    ice Documentation <span class="version">v1.2.5</span>
                                            </a>
                </div>
                <div id="top-right" class="collapse navbar-collapse">

                </div>
            </div>
        </header>
        <div id="body" class="container-fluid">
            <div class="row">
                <div id="body-left" class="col-lg-3 col-sm-4">
                    <div class="header-search">
                        <input class="search-box form-control" placeholder="Search for a class or namespace " type="text" />
                        <div id="menu-wrapper">
                        </div>
                    </div>
                </div>
                <div id="body-right" class="col-lg-9 col-sm-8">
                    <div class="content">
                        
<div>
    
    <ul class="breadcrumb">
        
        <li><a href="../../index.html">Home</a></li>
        
                <li><a href="../../classes.html">Classes</a></li>
                <li><a href="../../class/Ice/Tag.html">Ice\Tag</a></li>
                <li><a >Source</a></li>
                
    </ul>
    
</div>
<div class="class-header source clearfix">
    
    <div class="access-buttons pull-right">
        <a class="zep-button btn btn-default" href="../../class/Ice/Tag.html">Class</a>

                <a class="zep-button btn btn-default" href="https://github.com/ice/framework/tree/dev/ice/tag.zep">Github</a>
            </div>
    
    <div class="class-full-name">
        
        <span class="class-type">Class</span>
        
                <span class="namespace-piece">
            <a href="../../namespace/Ice.html">Ice</a>
        </span>
                <h1 class="class-name">Tag</h1>
    </div>
    
</div>


<pre class="zephir-source-file"><code>
namespace Ice;

/**
 * Tag helper is designed to simplify building of HTML tags.
 *
 * @package     Ice/Tag
 * @category    Helper
 * @author      Ice Team
 * @copyright   (c) 2014-2016 Ice Team
 * @license     http://iceframework.org/license
 * @uses        Ice\Mvc\Url
 */
class Tag
{

    const HTML32 = 1;
    const HTML401_STRICT = 2;
    const HTML401_TRANSITIONAL = 3;
    const HTML401_FRAMESET = 4;
    const HTML5 = 5;
    const XHTML10_STRICT = 6;
    const XHTML10_TRANSITIONAL = 7;
    const XHTML10_FRAMESET = 8;
    const XHTML11 = 9;
    const XHTML20 = 10;
    const XHTML5 = 11;

    protected di { get };
    protected values { get };
    protected docType = 5 { set };
    protected title = null { set, get };
    protected titleSeparator = &quot; - &quot; { set, get };
    protected meta = [] { set, get };
    protected escape = true { set };

    /**
     * Tag constructor. Fetch Di and set it as a property.
     */
    public function __construct()
    {
        let this-&gt;di = Di::$fetch();
    }

    /**
     * Appends a text to current document title.
     *
     * @param string title
     * @param string separator
     * @return void
     */
    public function appendTitle(string title, string separator = null) -&gt; void
    {
        let this-&gt;title = this-&gt;title . (separator ? separator : this-&gt;titleSeparator) . title;
    }

    /**
     * Prepends a text to current document title.
     *
     * @param string title
     * @param string separator
     * @return void
     */
    public function prependTitle(string title, string separator = null) -&gt; void
    {
        let this-&gt;title = title . (separator ? separator : this-&gt;titleSeparator) . this-&gt;title;
    }

    /**
     * Add meta tag to the container.
     *
     * @param array parameters
     * @return object this
     */
    public function addMeta(array parameters) -&gt; object
    {
        let this-&gt;meta[] = this-&gt;meta(parameters);

        return this;
    }

    /**
     * Builds a HTML INPUT[type=&quot;text&quot;] tag.
     *
     * &lt;pre&gt;&lt;code&gt;
     *  // Phtml &lt;input type=&quot;text&quot; id=&quot;some&quot; name=&quot;some&quot; value=&quot;some_value&quot;&gt;
     *  $this-&gt;tag-&gt;textField([&apos;some&apos;, &apos;some_value&apos;]);
     *  
     *  // Sleet &lt;input type=&quot;text&quot; id=&quot;some1&quot; name=&quot;some&quot; value=&quot;some_value&quot; class=&quot;field&quot; style=&quot;width: 100%&quot;&gt;
     *  {{ text_field([&apos;some&apos;, &apos;some_value&apos;, &apos;id&apos; =&gt; &apos;some1&apos;, &apos;class&apos; =&gt; &apos;field&apos;, &apos;style&apos; =&gt; &apos;width: 100%&apos;]) }}
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param array parameters
     * @return string
     */
    public function textField(array parameters) -&gt; string
    {
        return this-&gt;input(&quot;text&quot;, parameters);
    }

    /**
     * Builds a HTML INPUT[type=&quot;password&quot;] tag.
     *
     * &lt;pre&gt;&lt;code&gt;
     *  // Phtml &lt;input type=&quot;password&quot; id=&quot;pass&quot; name=&quot;pass&quot; class=&quot;form-control&quot;&gt;
     *  $this-&gt;tag-&gt;passwordField([&apos;pass&apos;, &apos;class&apos;: &apos;form-control&apos;]);
     *  
     *  // Sleet &lt;input type=&quot;password&quot; id=&quot;pass&quot; name=&quot;pass&quot; placeholder=&quot;My secret password&quot;&gt;
     *  {{ password_field([&apos;pass&apos;, &apos;placeholder&apos;: &apos;My secret password&apos;]) }}
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param array parameters
     * @return string
     */
    public function passwordField(array parameters) -&gt; string
    {
        return this-&gt;input(&quot;password&quot;, parameters);
    }

    /**
     * Builds a HTML INPUT[type=&quot;hidden&quot;] tag.
     *
     * &lt;pre&gt;&lt;code&gt;
     *  // Phtml &lt;input type=&quot;hidden&quot; id=&quot;secret&quot; name=&quot;secret&quot; value=&quot;some value&quot;&gt;
     *  $this-&gt;tag-&gt;hiddenField([&apos;secret&apos;, &apos;some value&apos;]);
     *  
     *  // Sleet &lt;input type=&quot;hidden&quot; id=&quot;my_id&quot; name=&quot;secret&quot; value=&quot;hidden value&quot;&gt;
     *  {{ hidden_field([&apos;secret&apos;, &apos;hidden value&apos;, &apos;id&apos;: &apos;my_id&apos;]) }}
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param array parameters
     * @return string
     */
    public function hiddenField(array parameters) -&gt; string
    {
        return this-&gt;input(&quot;hidden&quot;, parameters);
    }

    /**
     * Builds a HTML INPUT[type=&quot;file&quot;] tag.
     *
     * &lt;pre&gt;&lt;code&gt;
     *  // Sleet &lt;input type=&quot;file&quot; id=&quot;some&quot; name=&quot;some&quot; &gt;
     *  {{ file_field([&apos;some&apos;]) }}
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param array parameters
     * @return string
     */
    public function fileField(array parameters) -&gt; string
    {
        return this-&gt;input(&quot;file&quot;, parameters);
    }

    /**
     * Builds a HTML INPUT[type=&quot;submit&quot;] tag.
     *
     * &lt;pre&gt;&lt;code&gt;
     *  // Phtml &lt;input type=&quot;submit&quot; id=&quot;some&quot; name=&quot;some&quot; value=&quot;Submit&quot;&gt;
     *  $this-&gt;tag-&gt;submitButton([&apos;some&apos;, &apos;Submit&apos;]);
     *  
     *  // Sleet &lt;input type=&quot;submit&quot; id=&quot;some1&quot; name=&quot;some&quot; value=&quot;Submit&quot; class=&quot;btn&quot;&gt;
     *  {{ submit_button([&apos;some&apos;, &apos;value&apos; =&gt; &apos;Submit&apos;, &apos;id&apos; =&gt; &apos;some1&apos;, &apos;class&apos; =&gt; &apos;btn&apos;]) }}
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param array parameters
     * @return string
     */
    public function submitButton(array parameters) -&gt; string
    {
        return this-&gt;input(&quot;submit&quot;, parameters);
    }

    /**
     * Builds a HTML BUTTON tag.
     *
     * &lt;pre&gt;&lt;code&gt;
     *  // Phtml &lt;button type=&quot;submit&quot; id=&quot;some&quot; name=&quot;some&quot;&gt;content&lt;/button&gt;
     *  $this-&gt;tag-&gt;button([&apos;some&apos;, &apos;content&apos;]);
     *  
     *  // Sleet &lt;button type=&quot;button&quot; id=&quot;some1&quot; name=&quot;some&quot;&gt;&lt;i class=&quot;icon&quot;&gt;+&lt;/i&gt; Submit&lt;/button&gt;
     *  {{ button([&apos;some&apos;, &apos;&lt;i class=&quot;icon&quot;&gt;+&lt;/i&gt; &apos; . &apos;Submit&apos;, &apos;type&apos; =&gt; &apos;button&apos;, &apos;id&apos; =&gt; &apos;some1&apos;]) }}
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param array parameters
     * @return string
     */
    public function button(array parameters) -&gt; string
    {
        var defaultParams;

        let defaultParams = [
            &quot;id&quot;: 0,
            &quot;name&quot;: 0,
            &quot;content&quot;: 1,
            &quot;type&quot;: &quot;submit&quot;
        ];

        return this-&gt;tagHtml(&quot;button&quot;, parameters, defaultParams, [&quot;content&quot;], &quot;content&quot;, true);
    }

    /**
     * Builds a HTML INPUT[type=&quot;checkbox&quot;] tag.
     *
     * &lt;pre&gt;&lt;code&gt;
     *  // Phtml &lt;input type=&quot;checkbox&quot; id=&quot;agree&quot; name=&quot;agree&quot; value=&quot;yes&quot;&gt;
     *  $this-&gt;tag-&gt;checkField([&apos;agree&apos;, &apos;yes&apos;]);
     *  
     *  // Sleet &lt;input type=&quot;checkbox&quot; id=&quot;remember&quot; name=&quot;remember&quot; value=&quot;on&quot; checked=&quot;checked&quot;&gt;
     *  {{ check_field([&apos;remember&apos;, &apos;on&apos;, &apos;checked&apos;: &apos;checked&apos;]) }}
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param array parameters
     * @return string
     */
    public function checkField(array parameters) -&gt; string
    {
        return this-&gt;input(&quot;checkbox&quot;, parameters);
    }

    /**
     * Builds a HTML INPUT[type=&quot;radio&quot;] tag.
     *
     * &lt;pre&gt;&lt;code&gt;
     *  // Phtml &lt;input type=&quot;radio&quot; id=&quot;sex&quot; name=&quot;sex&quot; value=&quot;male&quot;&gt;
     *  $this-&gt;tag-&gt;radioField([&apos;sex&apos;, &apos;male&apos;]);
     *  
     *  // Sleet &lt;input type=&quot;radio&quot; id=&quot;sex&quot; name=&quot;sex&quot; value=&quot;female&quot; checked=&quot;checked&quot;&gt;
     *  {{ radio_field([&apos;sex&apos;, &apos;female&apos;, &apos;checked&apos;: &apos;checked&apos;]) }}
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param array parameters
     * @return string
     */
    public function radioField(array parameters) -&gt; string
    {
        return this-&gt;input(&quot;radio&quot;, parameters);
    }

    /**
     * Builds generic INPUT tags.
     *
     * @param string type
     * @param array parameters
     * @return string
     */
    private function input(string type, array parameters) -&gt; string
    {
        var defaultParams;

        let defaultParams = [
            &quot;id&quot;: 0,
            &quot;name&quot;: 0,
            &quot;value&quot;: 1,
            &quot;type&quot;: type
        ];

        return this-&gt;tagHtml(&quot;input&quot;, parameters, defaultParams, [], null, false, false, true);
    }

    /**
     * Builds a HTML FORM tag.
     *
     * &lt;pre&gt;&lt;code&gt;
     *  // Phtml &lt;form action=&quot;/post/add&quot; method=&quot;post&quot;&gt;
     *  $this-&gt;tag-&gt;form([&apos;post/add&apos;]);
     *  
     *  // &lt;form action=&quot;http://example.com&quot; method=&quot;post&quot;&gt;
     *  $this-&gt;tag-&gt;form([&apos;http://example.com&apos;, &apos;local&apos; =&gt; false]);
     *  
     *  // Sleet &lt;form method=&quot;post&quot;&gt;
     *  {{ form([false]) }}
     *  
     *  // &lt;form action=&quot;/post/add&quot; class=&quot;form-horizontal&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
     *  {{ form([&apos;post/add&apos;, &apos;enctype&apos; =&gt; &apos;multipart/form-data&apos;, &apos;class&apos; =&gt; &apos;form-horizontal&apos;]) }}
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param array parameters
     * @return string
     */
    public function form(array parameters) -&gt; string
    {
        var defaultParams, action, local;

        let defaultParams = [
            &quot;action&quot;: 0,
            &quot;method&quot;: &quot;post&quot;
        ];

        if !fetch local, parameters[&quot;local&quot;] {
            let local = true;
        }

        if local {
            if !fetch action, parameters[&quot;action&quot;] {
                fetch action, parameters[defaultParams[&quot;action&quot;]];
            }

            // Send to current URL if action is false
            if action !== false {
                let parameters[&quot;action&quot;] = this-&gt;di-&gt;get(&quot;url&quot;)-&gt;get(action);
            }
        }

        return this-&gt;tagHtml(&quot;form&quot;, parameters, defaultParams, [&quot;local&quot;]);
    }

    /**
     * Builds a HTML TEXTAREA tag.
     *
     * &lt;pre&gt;&lt;code&gt;
     *  // Phtml &lt;textarea id=&quot;description&quot; name=&quot;description&quot;&gt;content&lt;/textarea&gt;
     *  $this-&gt;tag-&gt;textArea([&apos;description&apos;, &apos;content&apos;]);
     *  
     *  // Sleet &lt;textarea id=&quot;some&quot; name=&quot;some&quot; placeholder=&quot;Say something&quot;&gt;&lt;/textarea&gt;
     *  {{ text_area([&apos;some&apos;, &apos;placeholder&apos; =&gt; &apos;Say something&apos;]) }}
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param array parameters
     * @return string
     */
    public function textArea(array parameters) -&gt; string
    {
        var defaultParams;

        let defaultParams = [
            &quot;id&quot;: 0,
            &quot;name&quot;: 0,
            &quot;content&quot;: 1
        ];

        return this-&gt;tagHtml(&quot;textarea&quot;, parameters, defaultParams, [&quot;content&quot;, &quot;value&quot;], &quot;content&quot;, true);
    }

    /**
     * Alias of the `img` method.
     */
    public function image(array parameters) -&gt; string
    {
        return this-&gt;img(parameters);
    }

    /**
     * Builds HTML IMG tags.
     *
     * &lt;pre&gt;&lt;code&gt;
     *  // Phtml &lt;img src=&quot;/img/logo.png&quot; alt=&quot;Logo&quot;&gt;
     *  $this-&gt;tag-&gt;img([&apos;img/logo.png&apos;, &apos;Logo&apos;]);
     *  
     *  // Sleet &lt;img src=&quot;http://example.com/img/logo.png&quot; alt=&quot;Logo&quot;&gt;
     *  {{ image([&apos;http://example.com/img/logo.png&apos;, &apos;Logo&apos;, &apos;local&apos; =&gt; false]) }}
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param array parameters
     * @return string
     */
    public function img(array parameters) -&gt; string
    {
        var defaultParams, src, local;

        let defaultParams = [
            &quot;src&quot;: 0,
            &quot;alt&quot;: 1
        ];

        if !fetch local, parameters[&quot;local&quot;] {
            let local = true;
        }

        if local {
            if !fetch src, parameters[&quot;src&quot;] {
                fetch src, parameters[defaultParams[&quot;src&quot;]];
            }

            let parameters[&quot;src&quot;] = this-&gt;di-&gt;get(&quot;url&quot;)-&gt;getStatic(src);
        }

        return this-&gt;tagHtml(&quot;img&quot;, parameters, defaultParams, [&quot;local&quot;], null, false, false, true);
    }

    /**
     * Alias of the `a` method.
     */
    public function linkTo(array parameters) -&gt; string
    {
        return this-&gt;a(parameters);
    }

    /**
     * Builds a HTML A tag using framework conventions.
     *
     * &lt;pre&gt;&lt;code&gt;
     *  // Phtml &lt;a href=&quot;/post/add&quot; title=&quot;Add a post&quot;&gt;Add&lt;/a&gt;
     *  $this-&gt;tag-&gt;a([&apos;post/add&apos;, &apos;Add&apos;, &apos;Add a post&apos;]);
     *  
     *  // Sleet &lt;a href=&quot;http://google.com&quot;&gt;Google&lt;/a&gt;
     *  {{ link_to([&apos;http://google.com&apos;, &apos;Google&apos;, &apos;local&apos; =&gt; false]) }}
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param array parameters
     * @return string
     */
    public function a(array parameters) -&gt; string
    {
        var defaultParams, href, local, query;

        let defaultParams = [
            &quot;href&quot;: 0,
            &quot;text&quot;: 1,
            &quot;title&quot;: 2
        ];

        if !fetch href, parameters[&quot;href&quot;] {
            fetch href, parameters[defaultParams[&quot;href&quot;]];
        }

        if !fetch local, parameters[&quot;local&quot;] {
            let local = true;
        }

        fetch query, parameters[&quot;query&quot;];

        let parameters[&quot;href&quot;] = this-&gt;di-&gt;get(&quot;url&quot;)-&gt;get(href, query, local);

        return this-&gt;tagHtml(&quot;a&quot;, parameters, defaultParams, [&quot;text&quot;, &quot;local&quot;, &quot;query&quot;], &quot;text&quot;, true);
    }

    /**
     * Builds a LINK[rel=&quot;stylesheet&quot;] tag.
     *
     * &lt;pre&gt;&lt;code&gt;
     *  // Phtml &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/css/app.css&quot;&gt;
     *  $this-&gt;tag-&gt;link([&apos;css/app.css&apos;]);
     *  
     *  // Sleet &lt;link rel=&quot;icon&quot; type=&quot;image/x-icon&quot; href=&quot;http://example.com/favicon.ico&quot;&gt;
     *  {{ link([&apos;http://example.com/favicon.ico&apos;, &apos;type&apos; =&gt; &apos;image/x-icon&apos;, &apos;rel&apos; =&gt; &apos;icon&apos;, &apos;local&apos; =&gt; false]) }}
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param array parameters
     * @return string
     */
    public function link(array parameters) -&gt; string
    {
        var defaultParams, href, local;

        let defaultParams = [
            &quot;href&quot;: 0,
            &quot;type&quot;: &quot;text/css&quot;,
            &quot;rel&quot;: &quot;stylesheet&quot;
        ];

        if !fetch local, parameters[&quot;local&quot;] {
            let local = true;
        }

        if local {
            if !fetch href, parameters[&quot;href&quot;] {
                fetch href, parameters[defaultParams[&quot;href&quot;]];
            }

            let parameters[&quot;href&quot;] = this-&gt;di-&gt;get(&quot;url&quot;)-&gt;getStatic(href);
        }

        return this-&gt;tagHtml(&quot;link&quot;, parameters, defaultParams, [&quot;local&quot;], null, false, true, true);
    }

    /**
     * Builds a SCRIPT[type=&quot;javascript&quot;] tag.
     *
     * &lt;pre&gt;&lt;code&gt;
     *  // Phtml &lt;script type=&quot;text/javascript&quot; src=&quot;/js/plugins.js&quot;&gt;&lt;/script&gt;
     *  $this-&gt;tag-&gt;script([&apos;js/plugins.js&apos;]);
     *  
     *  // Sleet &lt;script type=&quot;text/javascript&quot;&gt;alert(&quot;OK&quot;);&lt;/script&gt;
     *  {{ script([&apos;content&apos; =&gt; &apos;alert(&quot;OK&quot;);&apos;]) }}
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param array parameters
     * @return string
     */
    public function script(array parameters) -&gt; string
    {
        var defaultParams, src, local;

        let defaultParams = [
            &quot;src&quot;: 0,
            &quot;type&quot;: &quot;text/javascript&quot;
        ];

        if !fetch local, parameters[&quot;local&quot;] {
            let local = true;
        }

        if local {
            if !fetch src, parameters[&quot;src&quot;] {
                fetch src, parameters[defaultParams[&quot;src&quot;]];
            }

            if src {
                let parameters[&quot;src&quot;] = this-&gt;di-&gt;get(&quot;url&quot;)-&gt;getStatic(src);
            }
        }

        return this-&gt;tagHtml(&quot;script&quot;, parameters, defaultParams, [&quot;local&quot;, &quot;content&quot;], &quot;content&quot;, true) . PHP_EOL;
    }

    /**
     * Builds a STYLE tag.
     *
     * &lt;pre&gt;&lt;code&gt;
     *  // Sleet &lt;style type=&quot;text/css&quot;&gt;body { color: #444 }&lt;/style&gt;
     *  {{ style([&apos;body { color: #444 }&apos;]) }}
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param array parameters
     * @return string
     */
    public function style(array parameters) -&gt; string
    {
        var defaultParams;

        let defaultParams = [
            &quot;content&quot;: 0,
            &quot;type&quot;: &quot;text/css&quot;
        ];

        return this-&gt;tagHtml(&quot;style&quot;, parameters, defaultParams, [&quot;content&quot;], &quot;content&quot;, true, true);
    }

    /**
     * Builds a META tag.
     *
     * &lt;pre&gt;&lt;code&gt;
     *  // Phtml &lt;meta name=&quot;keywords&quot; content=&quot;ice, framework&quot;&gt;
     *  $this-&gt;tag-&gt;meta([&apos;ice, framework&apos;, &apos;keywords&apos;]);
     *  
     *  // Sleet &lt;meta property=&quot;og:description&quot; content=&quot;Your description&quot;&gt;
     *  {{ meta([&apos;Your description&apos;, &apos;property&apos;: &apos;og:description&apos;]) }}
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param array parameters
     * @return string
     */
    public function meta(array parameters) -&gt; string
    {
        var defaultParams;

        let defaultParams = [
            &quot;content&quot;: 0,
            &quot;name&quot;: 1
        ];

        return this-&gt;tagHtml(&quot;meta&quot;, parameters, defaultParams, [], null, false, true, true);
    }

    /**
     * Builds a SELECT tag.
     *
     * &lt;pre&gt;&lt;code&gt;
     *  $countries = [1 =&gt; &apos;England&apos;, 2 =&gt; &apos;Poland&apos;];
     *  $this-&gt;tag-&gt;select(&apos;country&apos;, $countries);
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param array parameters
     * @return string
     */
    public function select(array parameters)
    {
        var defaultParams, name, options, option, selected, tmp, value, text, group, subvalue, subtext, suboptions;

        let defaultParams = [
            &quot;id&quot;: 0,
            &quot;name&quot;: 0,
            &quot;options&quot;: 1
        ];

        if !fetch name, parameters[&quot;name&quot;] {
            fetch name, parameters[defaultParams[&quot;name&quot;]];
        }

        if !fetch options, parameters[&quot;options&quot;] {
            fetch options, parameters[defaultParams[&quot;options&quot;]];
        }

        let selected = this-&gt;hasValue(name) ? this-&gt;getValue(name) : null;

        if typeof selected == &quot;array&quot; {
            // This is a multi-select, god save us!
            let parameters[&quot;multiple&quot;] = &quot;multiple&quot;;
        }

        if typeof selected != &quot;array&quot; {
            if selected === null {
                // Use an empty array
                let selected = [];
            } else {
                // Convert the selected options to an array
                let tmp = [(string) selected],
                    selected = tmp;
            }
        }

        if empty options {
            // There are no options
            let options = &quot;&quot;;
        } else {
            for value, text in options {
                if typeof text == &quot;array&quot; {
                    // Create a new optgroup
                    let group = [&quot;label&quot;: value];

                    // Create a new list of options
                    let suboptions = [];

                    for subvalue, subtext in text {
                        // Force value to be string
                        let subvalue = (string) subvalue;

                        // Create a new attribute set for this option
                        let option = [&quot;value&quot;: subvalue];

                        if in_array(subvalue, selected) {
                            // This option is selected
                            let option[&quot;selected&quot;] = &quot;selected&quot;;
                        }

                        // Change the option to the HTML string
                        let option[&quot;content&quot;] = subtext,
                            suboptions[] = this-&gt;tagHtml(&quot;option&quot;, option, [], [&quot;content&quot;], &quot;content&quot;, true);
                    }

                    // Compile the options into a string
                    let group[&quot;content&quot;] = PHP_EOL . implode(PHP_EOL, suboptions) . PHP_EOL,
                        options[value] = this-&gt;tagHtml(&quot;optgroup&quot;, group, [], [&quot;content&quot;], &quot;content&quot;, true);
                } else {
                    // Force value to be string
                    let value = (string) value;

                    // Create a new attribute set for this option
                    let option = [&quot;value&quot;: value];

                    if in_array(value, selected) {
                        // This option is selected
                        let option[&quot;selected&quot;] = &quot;selected&quot;;
                    }

                    // Change the option to the HTML string
                    let option[&quot;content&quot;] = text,
                        options[value] = this-&gt;tagHtml(&quot;option&quot;, option, [], [&quot;content&quot;], &quot;content&quot;, true);
                }
            }

            // Compile the options into a single string
            let parameters[&quot;content&quot;] = implode(PHP_EOL, options);
        }

        return this-&gt;tagHtml(&quot;select&quot;, parameters, defaultParams, [&quot;content&quot;, &quot;options&quot;, &quot;value&quot;], &quot;content&quot;, true, true);
    }

    /**
     * Builds a HTML tag.
     *
     * @param string name Name of tag
     * @param array parameters Parameters like id, style
     * @param array defaultParams Default parameters
     * @param array skip Skip parameters
     * @param string content Parameter name to append content
     * @param boolean close Close tag
     * @param boolean eol Add end of line
     * @param boolean single Void element, close a tag by &quot; /&gt;&quot; (depending on doctype)
     * @return string
     */
    public function tagHtml(string name, array! parameters = [], array defaultParams = [], array skip = [], string content = null, boolean close = false, boolean eol = false, boolean single = false) -&gt; string
    {
        var params, param, key, value, attributes, code;

        let attributes = [],
            params = parameters;

        for param, key in defaultParams {
            if is_numeric(key) {
                if fetch value, params[key] {
                    let attributes[param] = value;
                }
            } else {
                let attributes[param] = key;
            }
        }

        for key in defaultParams {
            unset params[key];
        }

        let attributes = array_merge(attributes, params),
            code = this-&gt;prepareTag(name, attributes, skip, single);

        if eol {
            let code .= PHP_EOL;
        }

        if content {
            // Check if textarea has a value
            if name == &quot;textarea&quot; &amp;&amp; isset attributes[&quot;name&quot;] &amp;&amp; this-&gt;hasValue(attributes[&quot;name&quot;]) {
                let value = this-&gt;getValue(attributes[&quot;name&quot;]);
            } else {
                fetch value, attributes[content];
            }

            let code .= value;
        }

        if close {
            let code .= (eol ? PHP_EOL : &quot;&quot;) . this-&gt;endTag(name, eol);
        }

        return code;
    }

    /**
     * Builds a HTML close tag.
     *
     * &lt;pre&gt;&lt;code&gt;
     *  // Sleet &lt;/form&gt;
     *  {{ end_tag(&apos;form&apos;) }}
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param string name
     * @param boolean eol
     * @return string
     */
    public function endTag(string name, boolean eol = true) -&gt; string
    {
        return &quot;&lt;/&quot; . name . &quot;&gt;&quot; . (eol ? PHP_EOL : &quot;&quot;);
    }

    /**
     * Renders parameters keeping order in html attributes.
     *
     * @param string name
     * @param array attributes
     * @param array skip
     * @param boolean single
     * @return string
     */
    public function prepareTag(string! name, array! attributes, array skip = [], boolean single = false) -&gt; string
    {
        var order, keys, attrs, code, type, tmp, value, key;

        let order = [&quot;rel&quot;, &quot;type&quot;, &quot;for&quot;, &quot;src&quot;, &quot;href&quot;, &quot;action&quot;, &quot;id&quot;, &quot;name&quot;, &quot;value&quot;, &quot;class&quot;, &quot;style&quot;],
            keys = array_intersect_key(array_flip(order), attributes),
            attrs = array_merge(keys, attributes),
            code = &quot;&lt;&quot; . name;

        if fetch tmp, attrs[&quot;name&quot;] {
            if this-&gt;hasValue(tmp) {
                // Set the value from values property or _post
                fetch type, attrs[&quot;type&quot;];

                switch type {
                    case &quot;radio&quot;:
                    case &quot;checkbox&quot;:
                        // Don&apos;t overwrite values for radio/checkbox
                        if isset attrs[&quot;value&quot;] &amp;&amp; attrs[&quot;value&quot;] == this-&gt;getValue(tmp) {
                            let attrs[&quot;checked&quot;] = &quot;checked&quot;;
                        }
                    break;
                    default:
                        let attrs[&quot;value&quot;] = this-&gt;getValue(tmp);
                    break;
                }
            }
        }

        for key, value in attrs {
            if typeof key == &quot;string&quot; &amp;&amp; value !== null &amp;&amp; value !== false &amp;&amp; !in_array(key, skip) {
                if this-&gt;escape {
                    let value = this-&gt;di-&gt;get(&quot;filter&quot;)-&gt;sanitize(value, &quot;escape&quot;);
                }
                let code .= &quot; &quot; . key . &quot;=\&quot;&quot; . value. &quot;\&quot;&quot;;
            }
        }

        if single {
            let code .= this-&gt;docType &gt; self::HTML5 ? &quot; /&gt;&quot; : &quot;&gt;&quot;;
        } else {
            let code .= &quot;&gt;&quot;;
        }

        return code;
    }

    /**
     * Check if a helper has a default value set using Ice\Tag::setValues or value from _POST.
     *
     * @param string name
     * @return boolean
     */
    public function hasValue(string name) -&gt; boolean
    {
        // Check if there is a post value for the item
        if isset _POST[name] {
            return true;
        } else {
            // Check if there is a predefined value for it
            if isset this-&gt;values[name] {
                return true;
            }
        }

        return false;
    }

    /**
     * Assigns default values to generated tags by helpers.
     *
     * @param string id
     * @param mixed value
     * @return void
     */
    public function setValue(string! id, value) -&gt; void
    {
        if value !== null {
            if typeof value == &quot;array&quot; || typeof value == &quot;object&quot; {
                throw new Exception(&quot;Only scalar values can be assigned to UI components&quot;);
            }
        }
        let this-&gt;values[id] = value;
    }

    /**
     * Assigns default values to generated tags by helpers.
     *
     * @param array values
     * @param boolean merge
     * @return void
     */
    public function setValues(array values, boolean merge = false) -&gt; void
    {
        var current;

        if typeof values != &quot;array&quot; {
            throw new Exception(&quot;An array is required as default values&quot;);
        }

        if merge {
            let current = this-&gt;values;
            if typeof current == &quot;array&quot; {
                let this-&gt;values = array_merge(current, values);
            } else {
                let this-&gt;values = values;
            }
        } else {
            let this-&gt;values = values;
        }
    }

    /**
     * Every helper calls this function to check whether a component has a predefined value using Ice\Tag::setValue
     * or value from _POST.
     *
     * @param string name
     * @return mixed
     */
    public function getValue(string name)
    {
        var value;

        // Check if there is a predefined value for it
        if !fetch value, _POST[name] {
            // Check if there is a post value for the item
            if !fetch value, this-&gt;values[name] {
                return null;
            }
        }

        return value;
    }

    /**
     * Converts texts into URL-friendly titles.
     *
     * &lt;pre&gt;&lt;code&gt;
     *  $title = &quot;Mess&apos;d up --text-- just (to) stress /test/ ?our! `little` \\clean\\ url fun.ction!?--&gt;&quot;;
     *  // &apos;messd-up-text-just-to-stress-test-our-little-clean-url-function&apos;
     *  $friendly = $this-&gt;tag-&gt;friendlyTitle($title);
     * &lt;/code&gt;&lt;/pre&gt;
     *
     * @param string text
     * @param string separator
     * @param boolean lowercase
     * @param mixed replace
     * @return string
     */
    public function friendlyTitle(string text, string separator = &quot;-&quot;, boolean lowercase = true, var replace = null) -&gt; string
    {
        var friendly, locale, search;

        if extension_loaded(&quot;iconv&quot;) {
            // Save the old locale and set the new locale to UTF-8
            let locale = setlocale(LC_ALL, &quot;en_US.UTF-8&quot;),
                text = iconv(&quot;UTF-8&quot;, &quot;ASCII//TRANSLIT&quot;, text);
        }

        if replace {
            // Replace some additional chars
            if typeof replace != &quot;array&quot; &amp;&amp; typeof replace != &quot;string&quot; {
                throw new Exception(&quot;Parameter replace must be an array or a string&quot;);
            }

            if typeof replace == &quot;array&quot; {
                for search in replace {
                    let text = str_replace(search, &quot; &quot;, text);      
                }
            } else {
                let text = str_replace(replace, &quot; &quot;, text);
            }
        }

        let friendly = preg_replace(&quot;/[^a-zA-Z0-9\\/_|+ -]/&quot;, &quot;&quot;, text);

        if lowercase {
            let friendly = strtolower(friendly);
        }

        let friendly = preg_replace(&quot;/[\\/_|+ -]+/&quot;, separator, friendly),
            friendly = trim(friendly, separator);

        if extension_loaded(&quot;iconv&quot;) {
            // Revert back to the old locale
            setlocale(LC_ALL, locale);
        }
        return friendly;
    }

    /**
     * Get the document type declaration of content.
     *
     * @return string
     */
    public function getDocType() -&gt; string
    {
        switch this-&gt;docType {
            case self::HTML32:  return &quot;&lt;!DOCTYPE html PUBLIC \&quot;-//W3C//DTD HTML 3.2 Final//EN\&quot;&gt;&quot; . PHP_EOL;
            case self::HTML401_STRICT:  return &quot;&lt;!DOCTYPE html PUBLIC \&quot;-//W3C//DTD HTML 4.01//EN\&quot;&quot; . PHP_EOL . &quot;\t\&quot;http://www.w3.org/TR/html4/strict.dtd\&quot;&gt;&quot; . PHP_EOL;
            case self::HTML401_TRANSITIONAL:  return &quot;&lt;!DOCTYPE html PUBLIC \&quot;-//W3C//DTD HTML 4.01 Transitional//EN\&quot;&quot; . PHP_EOL . &quot;\t\&quot;http://www.w3.org/TR/html4/loose.dtd\&quot;&gt;&quot; . PHP_EOL;
            case self::HTML401_FRAMESET:  return &quot;&lt;!DOCTYPE html PUBLIC \&quot;-//W3C//DTD HTML 4.01 Frameset//EN\&quot;&quot; . PHP_EOL . &quot;\t\&quot;http://www.w3.org/TR/html4/frameset.dtd\&quot;&gt;&quot; . PHP_EOL;
            case self::HTML5:  return &quot;&lt;!DOCTYPE html&gt;&quot; . PHP_EOL;
            case self::XHTML10_STRICT:  return &quot;&lt;!DOCTYPE html PUBLIC \&quot;-//W3C//DTD XHTML 1.0 Strict//EN\&quot;&quot; . PHP_EOL . &quot;\t\&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\&quot;&gt;&quot; . PHP_EOL;
            case self::XHTML10_TRANSITIONAL:  return &quot;&lt;!DOCTYPE html PUBLIC \&quot;-//W3C//DTD XHTML 1.0 Transitional//EN\&quot;&quot; . PHP_EOL.&quot;\t\&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\&quot;&gt;&quot; . PHP_EOL;
            case self::XHTML10_FRAMESET:  return &quot;&lt;!DOCTYPE html PUBLIC \&quot;-//W3C//DTD XHTML 1.0 Frameset//EN\&quot;&quot; . PHP_EOL . &quot;\t\&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd\&quot;&gt;&quot; . PHP_EOL;
            case self::XHTML11:  return &quot;&lt;!DOCTYPE html PUBLIC \&quot;-//W3C//DTD XHTML 1.1//EN\&quot;&quot; . PHP_EOL . &quot;\t\&quot;http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\&quot;&gt;&quot; . PHP_EOL;
            case self::XHTML20: return &quot;&lt;!DOCTYPE html PUBLIC \&quot;-//W3C//DTD XHTML 2.0//EN\&quot;&quot; . PHP_EOL . &quot;\t\&quot;http://www.w3.org/MarkUp/DTD/xhtml2.dtd\&quot;&gt;&quot; . PHP_EOL;
            case self::XHTML5:  return &quot;&lt;!DOCTYPE html&gt;&quot; . PHP_EOL;
        }

        return &quot;&quot;;
    }
}
</code></pre>                    </div>
                </div>
            </div>
        </div>

        <script src="../../asset/static/js/jquery.min.js"></script>
        <script src="../../asset/static/js/bootstrap.min.js"></script>
        <script src="../../asset/static/js/highlight.pack.js"></script>
        <script src="../../asset/static/js/jquery.slimscroll.min.js"></script>
        <script src="../../asset/api_definition.js"></script>

        <script>var ZepCurrentPath = '../../'</script>
        <script src="../../asset/static/js/script.js"></script>
        <script type="text/javascript">
            $(window).on("load resize", function() {
                $('#menu-wrapper').slimscroll({ height: $(window).height() - 100, size: '3px' });
            });
        </script>
        <script type="text/javascript">
            $(document).ready(function() { $('pre code').each(function(i, block) { hljs.highlightBlock(block); }); });
            if ($('.zephir-source-file').length) {
                $('link[id]').each(function(i, link) {
                    link.disabled = (link.id != 'tomorrow-night');
                });
            }
        </script>
            </body>
</html>